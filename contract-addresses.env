# Stellar Smart Wallet Contract Addresses
# Update these with the actual contract IDs after deployment

# WebAuthn Verifier Contract ID
# Deployed: webauthn_verifier.wasm
REACT_APP_WEBAUTHN_VERIFIER_CONTRACT_ID=CBPGL7FWVKVQKRYRU32ZRH7RYKJ3T5UBI4KF2RVLT3BP2UXY7HPAVCWL

# Smart Wallet Contract ID  
# Deployed: smart_wallet.wasm with constructor (webauthn_verifier address)
# Updated: Fixed Bytes to BytesN conversion (using OpenZeppelin pattern: slice first, then to_buffer)
# Updated: Using separate WebAuthnSigDataVerifier struct with BytesN<64> for verifier call
# Updated: Contract converts Bytes to BytesN<64> and passes struct directly (not XDR-encoded)
# Updated: Changed to pass struct fields as separate parameters to avoid deserialization issues
# Updated: Using exact OpenZeppelin pattern: enum-based storage keys with Address parameters (SignerStorageKey::PasskeyPubkey(Address))
# Updated: Added extensive logging to diagnose panic location (test function, detailed register_signer logs, execute_payment entry log)
# Updated: Fixed struct serialization - using ScMap with sorted keys (authenticator_data, client_data, signature)
# Updated: Simplified struct field access with detailed logging
# Updated: Changed to pass WebAuthn fields as separate parameters (Stella's option #2) to avoid struct deserialization issues
# Updated: Clean rebuild after Stella's recommendations - fresh WASM deployed
# Updated: Added per-user balance tracking (deposit, get_balance functions) - following Tim's blog pattern
# New functions: deposit(user_address, asset, amount), get_balance(user_address, asset)
# Updated execute_payment to check user balance before transferring
# Updated: Changed deposit() to use transfer_from() instead of transfer() to use allowance mechanism
# Updated: Added WebAuthn verification to deposit() function for security (7 parameters: user_address, asset, amount, signature_payload, webauthn_signature, webauthn_authenticator_data, webauthn_client_data)
# Updated: Added require_auth() for contract address before transfer in execute_payment()
# Updated: Added DER signature decoding support for WebAuthn signatures
# Updated: Added require_auth() for contract address before transfer_from in deposit() - fixes deposit failures
# Updated: Removed require_auth() from deposit() - transfer_from works with allowance only
REACT_APP_SMART_WALLET_CONTRACT_ID=CA7G33NKXPBMSRRKS4PVBCE56OZDXGQCDUEBJ36NX7NS6RXGBSSMNX6P

# Stellar Network Configuration
REACT_APP_STELLAR_NETWORK=testnet
REACT_APP_HORIZON_URL=https://horizon-testnet.stellar.org
REACT_APP_SOROBAN_RPC_URL=https://soroban-testnet.stellar.org

# Backend Configuration
REACT_APP_BACKEND_URL=http://localhost:5001
